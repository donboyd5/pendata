---
format:
  html:
    toc: true
    toc-depth: 4
    page-layout: full
    css: wider.css
---    

# Stage: Retirees

```{r}
#| label: setup

source(here::here("data-raw", "R", "setup.R"))

```


```{r}
#| eval: true

# fpath <- fs::path(DIRS$work, "tests_retirement_rates.csv")
# status <- readr::read_csv(fpath)

# if (!all(status$passed)) {
#   stop("retirement rates tests failure")
# }

retirement_rates <- readRDS(fs::path(DIRS$work, "tests_retirement_rates.csv"))

# retirees <- retirees1 |>
#   filter(age_label != "Total") |>
#   select(type, age_label, age_lb, age_ub, count, benefits)

saveRDS(retirement_rates, fs::path(DIRS$staged, "retirement_rates.rds"))

# retirees <- retirees1 |>
#   filter(age_label != "Total") |>   select(type, age_label, age_lb, age_ub, count, benefits)

# fname <- "retirees.rds"
#   file_copy(
#     fs::path(DIRS$work, fname),
#     fs::path(DIRS$stage, fname),
#     overwrite = TRUE
#   )
# } else {
#   stop("retiree tests failure")
# }

```
