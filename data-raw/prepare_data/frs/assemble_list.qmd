---
format:
  html:
    toc: true
    toc-depth: 4
    page-layout: full
    css: wider.css
---

# Assemble list

```{r}
#| label: setup

source(here::here("data-raw", "R", "setup.R"))
DIRS <- set_plan_dirs(PLAN_CONSTANTS)

```


```{r}

rds_files <- fs::dir_ls(DIRS$staged, glob = "*.rds")

element_names <- rds_files |>
  path_file() |>
  path_ext_remove()

plan <- rds_files |>
  purrr::map(readRDS) |>
  rlang::set_names(element_names)

plan <- append(list(plan_shortname = PLAN_CONSTANTS$plan), plan)

new_name <- PLAN_CONSTANTS$plan
assign(new_name, plan) # Assign 'plan' to the new name (no intermediate variable)
save_name <- paste0(new_name, ".rda")
fpath <- here::here("data", save_name)
save(list = new_name, file = fpath, compress = "xz")

# devtools::load_all()
# check <- pendata::frs

```
